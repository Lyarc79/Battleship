(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}t.d({},{A:()=>P});const o=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.length=e,this.hitCount=0,this.coordinates=[]},(e=[{key:"hit",value:function(){this.hitCount<this.length&&this.hitCount++}},{key:"isSunk",value:function(){return this.length===this.hitCount}}])&&r(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=s(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],s=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return l(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}const d=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ships=[],this.missedAttacks=[],this.grid={},this.attackedCoordinates=new Set},(e=[{key:"clearBoard",value:function(){this.grid={},this.ships=[],this.missedAttacks=[],this.attackedCoordinates=new Set}},{key:"isOutOfBounds",value:function(t){var e=u(t,2),r=e[0],n=e[1];return r<0||r>=10||n<0||n>=10}},{key:"isOccupied",value:function(t){var e=u(t,2),r=e[0],n=e[1];return void 0!==this.grid["".concat(r,",").concat(n)]}},{key:"canPlaceShip",value:function(t){var e,r=i(t);try{for(r.s();!(e=r.n()).done;){var n=u(e.value,2),o=n[0],a=n[1];if(this.isOutOfBounds([o,a])||this.isOccupied([o,a]))return!1;for(var s=-1;s<=1;s++)for(var l=-1;l<=1;l++){var c=o+s,f=a+l;if((0!==s||0!==l)&&!this.isOutOfBounds([c,f])&&this.isOccupied([c,f]))return!1}}}catch(t){r.e(t)}finally{r.f()}return!0}},{key:"placeShip",value:function(t,e){var r,n=i(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(this.isOutOfBounds(o)||this.isOccupied(o))return!1}}catch(t){n.e(t)}finally{n.f()}var a,u=i(e);try{for(u.s();!(a=u.n()).done;){var s=a.value;this.grid["".concat(s[0],",").concat(s[1])]=t}}catch(t){u.e(t)}finally{u.f()}return this.ships.push({ship:t,coordinates:e}),!0}},{key:"getCoordinates",value:function(t,e,r){for(var n=u(r,2),o=n[0],a=n[1],i=[],s=0;s<t;s++){var l="horizontal"===e?o+s:o,c="vertical"===e?a+s:a;i.push([l,c])}return i}},{key:"placeShipRandom",value:function(t){var e,r=["horizontal","vertical"],n=i(t);try{for(n.s();!(e=n.n()).done;)for(var a=e.value,u=!1;!u;){var s=Math.floor(10*Math.random()),l=Math.floor(10*Math.random()),c=r[Math.floor(Math.random()*r.length)],f=this.getCoordinates(a,c,[s,l]);if(this.canPlaceShip(f)){var d=new o(a);this.placeShip(d,f),u=!0}}}catch(t){n.e(t)}finally{n.f()}}},{key:"recieveAttack",value:function(t){this.attackedCoordinates||(this.attackedCoordinates=new Set);var e=t.toString();if(!this.attackedCoordinates.has(e)){this.attackedCoordinates.add(e);var r,n=!1,o=i(this.ships);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.coordinates.some((function(e){return e[0]===t[0]&&e[1]===t[1]}))){a.ship.hit(),n=!0;break}}}catch(t){o.e(t)}finally{o.f()}n||this.missedAttacks.push(t)}}},{key:"areAllShipsSunk",value:function(){var t,e=i(this.ships);try{for(e.s();!(t=e.n()).done;)if(!t.value.ship.isSunk())return!1}catch(t){e.e(t)}finally{e.f()}return!0}},{key:"getCellState",value:function(t,e){var r="".concat(t,",").concat(e);return this.missedAttacks.some((function(r){var n=u(r,2),o=n[0],a=n[1];return o===t&&a===e}))?"miss":this.attackedCoordinates.has(r)&&this.ships.some((function(r){return r.coordinates.some((function(r){return r[0]===t&&r[1]===e}))}))?"hit":this.ships.some((function(r){return r.coordinates.some((function(r){return r[0]===t&&r[1]===e}))}))?"ship":"empty"}}])&&c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function h(t){var e=function(t){if("object"!=p(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}const v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"real";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.gameboard=new d,this.previousMoves=[],this.opponentGameboard=null}return e=t,(r=[{key:"setOpponentGameboard",value:function(e){if(!(e instanceof t))throw new Error("Opponent must be a Player instance!");this.opponentGameboard=e.gameboard}},{key:"makeMove",value:function(t){if(!this.opponentGameboard)throw new Error("Opponent gameboard is not set!");if(!this.isValidCoordinate(t))throw new Error("Invalid coordinates!");this.opponentGameboard.recieveAttack(t)}},{key:"generateMove",value:function(){if(!this.opponentGameboard)throw new Error("Opponent gameboard is not set!");var t;do{t=[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}while(this.previousMoves.some((function(e){return e[0]===t[0]&&e[1]===t[1]})));this.previousMoves.push(t),this.opponentGameboard.recieveAttack(t)}},{key:"isValidCoordinate",value:function(t){if(Array.isArray(t)&&2===t.length){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],s=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),r=e[0],n=e[1];if(r>=0&&r<=9&&n>=0&&n<=9)return!0}return!1}}])&&m(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r}();var b,g=(b=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.getElementById("".concat(e,"-gameboard"));n.innerHTML="";for(var o=0;o<10;o++)for(var a=0;a<10;a++){var i=document.createElement("div");i.dataset.coordinates="".concat(o,",").concat(a);var u=t.getCellState(o,a);"ship"!==u||r?"hit"===u?i.classList.add("hit"):"miss"===u&&i.classList.add("miss"):i.classList.add("ship"),n.appendChild(i)}},{renderGameboard:b,addCellEvents:function(t,e){document.getElementById("".concat(t,"-gameboard")).addEventListener("click",(function(t){var r=t.target;if(r.dataset.coordinates){var n=r.dataset.coordinates.split(",").map((function(t){return parseInt(t,10)}));e(n)}}))},clearCellEvents:function(t){var e=document.getElementById("".concat(t,"-gameboard")),r=e.cloneNode(!0);e.parentNode.replaceChild(r,e)},randomShipPlacement:function(){document.getElementById("randomizeShipsBtn").addEventListener("click",(function(){P.randomizeShips()}))},resetGameBtn:function(){document.getElementById("resetGameBtn").addEventListener("click",(function(){P.resetGame()}))},updateTurnDisplay:function(t){var e=document.getElementById("game-message");e.classList.remove("playerTurnDisplay","computerTurnDisplay"),"real"===t.type?e.classList.add("playerTurnDisplay"):e.classList.add("computerTurnDisplay")},displayMessage:function(t){document.getElementById("game-message").textContent=t},renderAllBoards:function(t,e){b(t.gameboard,"player1",!1),b(e.gameboard,"player2",!0)}});const S=g;var w,k,O,A,C,E,M,B,j=(A=!1,C=function(t){if(!A)try{if(O.makeMove(t),S.renderAllBoards(w,k),w.gameboard.areAllShipsSunk())return B("Computer wins!");if(k.gameboard.areAllShipsSunk())return B("Player 1 wins!");M(),"computer"===O.type?E():S.displayMessage("Player 1 turn")}catch(t){console.error(t.message)}},E=function(){setTimeout((function(){if(O.generateMove(),S.renderGameboard(w.gameboard,"player1"),w.gameboard.areAllShipsSunk())return B("Player 2 wins!");M()}),1e3)},M=function(){O===w?(O=k,S.displayMessage("Computer turn"),S.updateTurnDisplay(O)):O===k&&(O=w,S.displayMessage("Player 1 turn"),S.updateTurnDisplay(O))},B=function(t){A=!0,S.displayMessage(t)},{initializeGame:function(){w=new v("real"),k=new v("computer"),w.setOpponentGameboard(k),k.setOpponentGameboard(w),S.randomShipPlacement(),S.resetGameBtn(),O=w,S.renderAllBoards(w,k)},randomizeShips:function(){w.gameboard.clearBoard(),k.gameboard.clearBoard();var t=[5,4,3,3,2];w.gameboard.placeShipRandom(t),k.gameboard.placeShipRandom(t),S.renderAllBoards(w,k),S.addCellEvents("player2",C)},resetGame:function(){A=!1,w.gameboard.clearBoard(),k.gameboard.clearBoard(),O=w,S.renderAllBoards(w,k),S.clearCellEvents("player2")}});const P=j;document.addEventListener("DOMContentLoaded",(function(){j.initializeGame()}))})();
//# sourceMappingURL=bundle.js.map